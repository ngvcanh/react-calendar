import{useState as e,useRef as t,useEffect as r,useCallback as n}from"react";import o,{cancel as u}from"./requestAnimationFrame.js";import{getValues as c}from"./getValues.js";import{s as i}from"./setCss-a578d9ff.js";import{i as l}from"./isEqual-3670d1c6.js";import{i as a}from"./isUndefined-9db4dc0d.js";import d from"./getInnerWidth.js";import s from"./getInnerHeight.js";import"./merge-818d5aef.js";import"./cssProperty.js";import"./toCamelCase.js";import"./prefixStyle.js";import"./addPxToStyle.js";function v(v){var f=e(v),m=f[0],h=f[1],p=e()[1],g=t(0),L=t(0),T=t(0),E=t(0),S=t(0),b=t(0),H=t(0),w=t(!1),M=t(!1),W=t(!1),y=t(),R=t(),k=t(),z=t(null),j=t(null),C=t(null),D=t(null),x=t(null),V=t(null);r((function(){l(v,m)||h(v)}),[v]),r((function(){var e,t,r,n,o,c,i,l;if(!a(document)&&j.current)return j.current.addEventListener("scroll",he),I()?(console.log("herrererer"),null===(e=C.current)||void 0===e||e.addEventListener("mouseenter",Q),null===(t=C.current)||void 0===t||t.addEventListener("mouseleave",$),null===(r=C.current)||void 0===r||r.addEventListener("mousedown",K),null===(n=x.current)||void 0===n||n.addEventListener("mouseenter",Q),null===(o=x.current)||void 0===o||o.addEventListener("mouseleave",$),null===(c=x.current)||void 0===c||c.addEventListener("mousedown",J),null===(i=D.current)||void 0===i||i.addEventListener("mousedown",G),null===(l=V.current)||void 0===l||l.addEventListener("mousedown",P),window.addEventListener("resize",F),function(){var e,t,r,n,o,c,i,l,a;null===(e=j.current)||void 0===e||e.addEventListener("scroll",he),null===(t=C.current)||void 0===t||t.removeEventListener("mouseenter",Q),null===(r=C.current)||void 0===r||r.removeEventListener("mouseleave",$),null===(n=C.current)||void 0===n||n.removeEventListener("mousedown",K),null===(o=x.current)||void 0===o||o.removeEventListener("mouseenter",Q),null===(c=x.current)||void 0===c||c.removeEventListener("mouseleave",$),null===(i=x.current)||void 0===i||i.removeEventListener("mousedown",J),null===(l=D.current)||void 0===l||l.removeEventListener("mousedown",G),null===(a=V.current)||void 0===a||a.removeEventListener("mousedown",P),window.removeEventListener("resize",F),N(),y.current&&u(y.current),R.current&&clearTimeout(R.current),k.current&&clearInterval(k.current)}):function(){var e;null===(e=j.current)||void 0===e||e.removeEventListener("scroll",he)}}));var B=n((function(){return p({})}),[]),I=n((function(e){if(void 0===e&&(e=!0),e&&0!==g.current)return g.current;if(a(document))g.current=0;else{var t=document.createElement("div");i(t,{width:100,height:100,position:"absolute",top:-9999,overflow:"scroll",msOverflowStyle:"scrollbar"}),document.body.appendChild(t),g.current=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return g.current}),[]),A=function(e){y.current&&u(y.current),y.current=o((function(){y.current=void 0,e()}))},X=function(e){var t,r=null!==(t=j.current)&&void 0!==t?t:{},n=r.scrollWidth,o=void 0===n?0:n,u=r.clientWidth,c=void 0===u?0:u;return e/(d(C.current)-ee())*(o-c)},Y=function(e){var t,r=null!==(t=j.current)&&void 0!==t?t:{},n=r.scrollHeight,o=void 0===n?0:n,u=r.clientHeight,c=void 0===u?0:u;return e/(s(x.current)-te())*(o-c)},F=function(){I(!1),B()},P=function(e){e.preventDefault(),U(e);var t=e.target,r=e.clientY,n=t.offsetHeight,o=t.getBoundingClientRect().top;H.current=n-(r-o)},q=function(e){if(b.current){var t=e.clientX,r=-C.current.getBoundingClientRect().left+t-(ee()-b.current);j.current.scrollLeft=X(r)}if(H.current){var n=e.clientY;r=-x.current.getBoundingClientRect().top+n-(te()-H.current);j.current.scrollTop=Y(r)}return!1},N=function(){i(document.body,{userSelect:""}),document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",O),document.onselectstart=null},O=function(){M.current=!1,b.current=H.current=0,N(),m.autoHide&&ae()},U=function(e){M.current=!0,e.stopImmediatePropagation(),i(document.body,{userSelect:""}),document.addEventListener("mousemove",q),document.addEventListener("mouseup",O),document.onselectstart=function(){return!1}},G=function(e){e.preventDefault(),U(e);var t=e.target,r=e.clientX,n=t.offsetWidth,o=t.getBoundingClientRect().left;b.current=n-(r-o)},J=function(e){if(e.preventDefault(),j.current){var t=e.target,r=e.clientY,n=t.getBoundingClientRect().top,o=te(),u=Math.abs(n-r)-o/2;j.current.scrollTop=Y(u)}},K=function(e){if(e.preventDefault(),j.current){var t=e.target,r=e.clientX,n=t.getBoundingClientRect().left,o=ee(),u=Math.abs(n-r)-o/2;j.current.scrollLeft=X(u)}},Q=function(){W.current=!0,Z()},Z=function(){return m.autoHide&&le()},$=function(){W.current=!1,_()},_=function(){return m.autoHide&&ae()},ee=function(){var e=m.thumbSize,t=m.thumbMinSize,r=j.current,n=r.scrollWidth,o=r.clientWidth,u=d(C.current),c=Math.ceil(o/n*u);return u<=c?0:e||Math.max(c,null!=t?t:0)},te=function(){var e=m.thumbSize,t=m.thumbMinSize,r=j.current,n=r.scrollHeight,o=r.clientHeight,u=s(x.current),c=Math.ceil(o/n*u);return u<=c?0:e||Math.max(c,null!=t?t:0)},re=function(e){var t=e.clientHeight,r=e.scrollHeight;i(x.current,{visibility:r>t?"visible":"hidden"})},ne=function(e){var t=e.clientWidth,r=e.scrollWidth;i(C.current,{visibility:r>t?"visible":"hidden"})},oe=function(e){var t=e.scrollTop,r=e.clientHeight,n=e.scrollHeight,o=te(),u=s(x.current),c=t/(n-r)*(u-o);i(V.current,{height:u,transform:"translateY(".concat(c,"px)")})},ue=function(e){var t=e.scrollLeft,r=e.clientWidth,n=e.scrollWidth,o=d(C.current),u=ee(),c=t/(n-r)*(o-u);i(D.current,{width:u,transform:"translateX(".concat(c,"px)")})},ce=function(e){var t=m.hideTracksWhenNotNeeded,r=m.onUpdate,n=c(j);I()&&(t&&(re(n),ne(n)),ue(n),oe(n)),r&&r(n),e&&e(n)},ie=function(e){A((function(){return ce(e)}))},le=function(){R.current&&clearTimeout(R.current),i(C.current,{opacity:1}),i(x.current,{opacity:1})},ae=function(){if(!(M.current||w.current||W.current)){var e=m.autoHideTimeout,t=void 0===e?1e3:e;clearTimeout(R.current),R.current=setTimeout((function(){i(C.current,{opacity:0}),i(x.current,{opacity:0})}),t)}},de=function(){return m.autoHide&&le()},se=function(){return m.autoHide&&ae()},ve=function(){var e=m.onScrollStart;e&&e(),de()},fe=function(){var e=m.onScrollStop;e&&e(),se()},me=function(){w.current||(w.current=!0,ve(),k.current=setInterval((function(){E.current===L.current&&S.current===T.current&&(clearInterval(k.current),w.current=!1,fe()),E.current=L.current,S.current=T.current}),100))},he=function(e){var t=m.onScroll,r=m.onScrollFrame;t&&t(e),ie((function(e){var t=e.scrollLeft,n=e.scrollTop;L.current=t,T.current=n,r&&r(e)})),me()};return{getScrollbarWidth:I,getValues:function(){return c(j)},getThumbHorizontalWidth:ee,getThumbVerticalHeight:te,getScrollLeftForOffset:X,update:ie,updateScrollbar:ce,updateVerticalTrack:re,updateHorizontalTrack:ne,updateHorizontalThumb:ue,updateVerticalThumb:oe,detectScrolling:me,handleScroll:he,handleScrollStart:ve,handleScrollStop:fe,handleScrollStartAutoHide:de,handleScrollStopAutoHide:se,handleTrackMouseEnter:Q,handleTrackMouseEnterAutoHide:Z,handleTrackMouseLeave:$,handleTrackMouseLeaveAutoHide:_,handleHorizontalTrackMouseDown:K,handleVerticalTrackMouseDown:J,handleHorizontalThumbMouseDown:G,handleVerticalThumbMouseDown:P,handleDragStart:U,showTracks:le,hideTracks:ae,raf:A,scrollbarRef:z,viewRef:j,horizontalTrackRef:C,horizontalThumbRef:D,verticalTrackRef:x,verticalThumbRef:V,scrollLeftRef:L,scrollTopRef:T}}export{v as default};
